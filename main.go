package main

import (
	"github.com/deanishe/awgo"
	"github.com/tidwall/gjson"
	"io"
	"io/ioutil"
	"net/http"
	"strings"
)

var wf *aw.Workflow
var elements []element

type element struct {
	id   string
	text string
}

func init() {
	wf = aw.New()

	json := "[{\"id\":\"d\",\"text\":\"D\"},{\"id\":\"c\",\"text\":\"C\"},{\"id\":\"r\",\"text\":\"R\"},{\"id\":\"1c\",\"text\":\"1C\"},{\"id\":\"dm\",\"text\":\"DM\"},{\"id\":\"go\",\"text\":\"Go\"},{\"id\":\"vs\",\"text\":\"vs\"},{\"id\":\"qt\",\"text\":\"Qt\"},{\"id\":\"al\",\"text\":\"AL\"},{\"id\":\"ada\",\"text\":\"Ada\"},{\"id\":\"svn\",\"text\":\"SVN\"},{\"id\":\"sas\",\"text\":\"SAS\"},{\"id\":\"sam\",\"text\":\"SAM\"},{\"id\":\"coq\",\"text\":\"Coq\"},{\"id\":\"yii\",\"text\":\"Yii\"},{\"id\":\"cvs\",\"text\":\"CVS\"},{\"id\":\"vue\",\"text\":\"Vue\"},{\"id\":\"ros\",\"text\":\"ROS\"},{\"id\":\"sbt\",\"text\":\"SBT\"},{\"id\":\"waf\",\"text\":\"Waf\"},{\"id\":\"vim\",\"text\":\"Vim\"},{\"id\":\"red\",\"text\":\"Red\"},{\"id\":\"y86\",\"text\":\"Y86\"},{\"id\":\"elm\",\"text\":\"Elm\"},{\"id\":\"zsh\",\"text\":\"Zsh\"},{\"id\":\"qml\",\"text\":\"QML\"},{\"id\":\"gis\",\"text\":\"GIS\"},{\"id\":\"ssh\",\"text\":\"SSH\"},{\"id\":\"web\",\"text\":\"Web\"},{\"id\":\"tex\",\"text\":\"TeX\"},{\"id\":\"git\",\"text\":\"Git\"},{\"id\":\"zig\",\"text\":\"zig\"},{\"id\":\"gpg\",\"text\":\"GPG\"},{\"id\":\"ate\",\"text\":\"ATE\"},{\"id\":\"osx\",\"text\":\"OSX\"},{\"id\":\"pvs\",\"text\":\"PVS\"},{\"id\":\"gwt\",\"text\":\"GWT\"},{\"id\":\"opa\",\"text\":\"Opa\"},{\"id\":\"hol\",\"text\":\"HOL\"},{\"id\":\"hsp\",\"text\":\"HSP\"},{\"id\":\"awr\",\"text\":\"AWR\"},{\"id\":\"now\",\"text\":\"now\"},{\"id\":\"iar\",\"text\":\"IAR\"},{\"id\":\"tye\",\"text\":\"Tye\"},{\"id\":\"nim\",\"text\":\"Nim\"},{\"id\":\"joe\",\"text\":\"Joe\"},{\"id\":\"c++\",\"text\":\"C++\"},{\"id\":\"lua\",\"text\":\"Lua\"},{\"id\":\"lyx\",\"text\":\"LyX\"},{\"id\":\"ats\",\"text\":\"ATS\"},{\"id\":\"yii2\",\"text\":\"Yii2\"},{\"id\":\"sass\",\"text\":\"Sass\"},{\"id\":\"mean\",\"text\":\"MEAN\"},{\"id\":\"modx\",\"text\":\"MODX\"},{\"id\":\"mule\",\"text\":\"mule\"},{\"id\":\"tla+\",\"text\":\"TLA+\"},{\"id\":\"less\",\"text\":\"Less\"},{\"id\":\"lamp\",\"text\":\"LAMP\"},{\"id\":\"keil\",\"text\":\"Keil\"},{\"id\":\"kate\",\"text\":\"Kate\"},{\"id\":\"buck\",\"text\":\"Buck\"},{\"id\":\"sdcc\",\"text\":\"Sdcc\"},{\"id\":\"test\",\"text\":\"Test\"},{\"id\":\"cake\",\"text\":\"Cake\"},{\"id\":\"nesc\",\"text\":\"NesC\"},{\"id\":\"node\",\"text\":\"Node\"},{\"id\":\"jenv\",\"text\":\"JEnv\"},{\"id\":\"java\",\"text\":\"Java\"},{\"id\":\"nova\",\"text\":\"nova\"},{\"id\":\"hugo\",\"text\":\"Hugo\"},{\"id\":\"wyam\",\"text\":\"Wyam\"},{\"id\":\"nwjs\",\"text\":\"Nwjs\"},{\"id\":\"hexo\",\"text\":\"Hexo\"},{\"id\":\"helm\",\"text\":\"Helm\"},{\"id\":\"tags\",\"text\":\"Tags\"},{\"id\":\"otto\",\"text\":\"Otto\"},{\"id\":\"pawn\",\"text\":\"PAWN\"},{\"id\":\"perl\",\"text\":\"Perl\"},{\"id\":\"xill\",\"text\":\"Xill\"},{\"id\":\"ggts\",\"text\":\"GGTS\"},{\"id\":\"geth\",\"text\":\"Geth\"},{\"id\":\"gcov\",\"text\":\"Gcov\"},{\"id\":\"font\",\"text\":\"Font\"},{\"id\":\"venv\",\"text\":\"venv\"},{\"id\":\"flex\",\"text\":\"Flex\"},{\"id\":\"xojo\",\"text\":\"Xojo\"},{\"id\":\"agda\",\"text\":\"Agda\"},{\"id\":\"yalc\",\"text\":\"yalc\"},{\"id\":\"docz\",\"text\":\"Docz\"},{\"id\":\"yarn\",\"text\":\"yarn\"},{\"id\":\"vvvv\",\"text\":\"VVVV\"},{\"id\":\"root\",\"text\":\"ROOT\"},{\"id\":\"diff\",\"text\":\"Diff\"},{\"id\":\"vlab\",\"text\":\"VLab\"},{\"id\":\"data\",\"text\":\"Data\"},{\"id\":\"dart\",\"text\":\"Dart\"},{\"id\":\"ros2\",\"text\":\"ROS2\"},{\"id\":\"snap\",\"text\":\"Snap\"},{\"id\":\"ruby\",\"text\":\"Ruby\"},{\"id\":\"rust\",\"text\":\"Rust\"},{\"id\":\"cuda\",\"text\":\"CUDA\"},{\"id\":\"text\",\"text\":\"Text\"},{\"id\":\"jspm\",\"text\":\"jspm\"},{\"id\":\"bluej\",\"text\":\"bluej\"},{\"id\":\"moban\",\"text\":\"Moban\"},{\"id\":\"bazel\",\"text\":\"Bazel\"},{\"id\":\"meson\",\"text\":\"Meson\"},{\"id\":\"batch\",\"text\":\"Batch\"},{\"id\":\"nanoc\",\"text\":\"Nanoc\"},{\"id\":\"maven\",\"text\":\"Maven\"},{\"id\":\"basic\",\"text\":\"Basic\"},{\"id\":\"scons\",\"text\":\"SCons\"},{\"id\":\"conan\",\"text\":\"Conan\"},{\"id\":\"vuejs\",\"text\":\"Vuejs\"},{\"id\":\"nette\",\"text\":\"Nette\"},{\"id\":\"scala\",\"text\":\"Scala\"},{\"id\":\"adobe\",\"text\":\"Adobe\"},{\"id\":\"ninja\",\"text\":\"Ninja\"},{\"id\":\"linux\",\"text\":\"Linux\"},{\"id\":\"nohup\",\"text\":\"Nohup\"},{\"id\":\"bloop\",\"text\":\"Bloop\"},{\"id\":\"ocaml\",\"text\":\"OCaml\"},{\"id\":\"xcode\",\"text\":\"Xcode\"},{\"id\":\"latex\",\"text\":\"LaTeX\"},{\"id\":\"audio\",\"text\":\"Audio\"},{\"id\":\"tower\",\"text\":\"Tower\"},{\"id\":\"docfx\",\"text\":\"DocFx\"},{\"id\":\"sonar\",\"text\":\"Sonar\"},{\"id\":\"kicad\",\"text\":\"KiCad\"},{\"id\":\"orcad\",\"text\":\"OrCAD\"},{\"id\":\"bower\",\"text\":\"Bower\"},{\"id\":\"kaldi\",\"text\":\"kaldi\"},{\"id\":\"julia\",\"text\":\"Julia\"},{\"id\":\"patch\",\"text\":\"Patch\"},{\"id\":\"perl6\",\"text\":\"Perl6\"},{\"id\":\"swift\",\"text\":\"Swift\"},{\"id\":\"typo3\",\"text\":\"Typo3\"},{\"id\":\"jboss\",\"text\":\"JBoss\"},{\"id\":\"unity\",\"text\":\"Unity\"},{\"id\":\"eagle\",\"text\":\"Eagle\"},{\"id\":\"rider\",\"text\":\"Rider\"},{\"id\":\"pico8\",\"text\":\"pico8\"},{\"id\":\"infer\",\"text\":\"infer\"},{\"id\":\"idris\",\"text\":\"Idris\"},{\"id\":\"elisp\",\"text\":\"Elisp\"},{\"id\":\"plone\",\"text\":\"Plone\"},{\"id\":\"clean\",\"text\":\"Clean\"},{\"id\":\"emacs\",\"text\":\"Emacs\"},{\"id\":\"ember\",\"text\":\"Ember\"},{\"id\":\"grunt\",\"text\":\"grunt\"},{\"id\":\"renpy\",\"text\":\"Renpy\"},{\"id\":\"clion\",\"text\":\"CLion\"},{\"id\":\"redis\",\"text\":\"Redis\"},{\"id\":\"godot\",\"text\":\"Godot\"},{\"id\":\"spark\",\"text\":\"Spark\"},{\"id\":\"video\",\"text\":\"Video\"},{\"id\":\"extjs\",\"text\":\"ExtJs\"},{\"id\":\"fancy\",\"text\":\"Fancy\"},{\"id\":\"react\",\"text\":\"react\"},{\"id\":\"stata\",\"text\":\"Stata\"},{\"id\":\"rails\",\"text\":\"Rails\"},{\"id\":\"vertx\",\"text\":\"Vertx\"},{\"id\":\"flask\",\"text\":\"Flask\"},{\"id\":\"putty\",\"text\":\"PuTTY\"},{\"id\":\"cmake\",\"text\":\"CMake\"},{\"id\":\"games\",\"text\":\"Games\"},{\"id\":\"xtext\",\"text\":\"XText\"},{\"id\":\"pydev\",\"text\":\"pydev\"},{\"id\":\"vapor\",\"text\":\"Vapor\"},{\"id\":\"vcpkg\",\"text\":\"vcpkg\"},{\"id\":\"macos\",\"text\":\"macOS\"},{\"id\":\"splunk\",\"text\":\"Splunk\"},{\"id\":\"jigsaw\",\"text\":\"Jigsaw\"},{\"id\":\"mikroc\",\"text\":\"MikroC\"},{\"id\":\"mplabx\",\"text\":\"MPLabX\"},{\"id\":\"python\",\"text\":\"Python\"},{\"id\":\"fsharp\",\"text\":\"fsharp\"},{\"id\":\"meteor\",\"text\":\"Meteor\"},{\"id\":\"metals\",\"text\":\"Metals\"},{\"id\":\"bitrix\",\"text\":\"Bitrix\"},{\"id\":\"mdbook\",\"text\":\"MdBook\"},{\"id\":\"csharp\",\"text\":\"Csharp\"},{\"id\":\"racket\",\"text\":\"Racket\"},{\"id\":\"cloud9\",\"text\":\"Cloud9\"},{\"id\":\"scheme\",\"text\":\"Scheme\"},{\"id\":\"zephir\",\"text\":\"Zephir\"},{\"id\":\"finale\",\"text\":\"Finale\"},{\"id\":\"redcar\",\"text\":\"Redcar\"},{\"id\":\"goland\",\"text\":\"Goland\"},{\"id\":\"puppet\",\"text\":\"Puppet\"},{\"id\":\"erlang\",\"text\":\"Erlang\"},{\"id\":\"gradle\",\"text\":\"Gradle\"},{\"id\":\"grails\",\"text\":\"Grails\"},{\"id\":\"stdlib\",\"text\":\"StdLib\"},{\"id\":\"groovy\",\"text\":\"Groovy\"},{\"id\":\"ensime\",\"text\":\"Ensime\"},{\"id\":\"nextjs\",\"text\":\"NextJS\"},{\"id\":\"nikola\",\"text\":\"Nikola\"},{\"id\":\"pulumi\",\"text\":\"Pulumi\"},{\"id\":\"stella\",\"text\":\"Stella\"},{\"id\":\"bazaar\",\"text\":\"Bazaar\"},{\"id\":\"defold\",\"text\":\"Defold\"},{\"id\":\"strapi\",\"text\":\"Strapi\"},{\"id\":\"backup\",\"text\":\"Backup\"},{\"id\":\"ceylon\",\"text\":\"Ceylon\"},{\"id\":\"delphi\",\"text\":\"Delphi\"},{\"id\":\"dframe\",\"text\":\"Dframe\"},{\"id\":\"elixir\",\"text\":\"Elixir\"},{\"id\":\"vaadin\",\"text\":\"Vaadin\"},{\"id\":\"idapro\",\"text\":\"IDAPro\"},{\"id\":\"codeio\",\"text\":\"Codeio\"},{\"id\":\"nuxtjs\",\"text\":\"Nuxtjs\"},{\"id\":\"images\",\"text\":\"Images\"},{\"id\":\"retool\",\"text\":\"retool\"},{\"id\":\"stylus\",\"text\":\"Stylus\"},{\"id\":\"altium\",\"text\":\"Altium\"},{\"id\":\"octave\",\"text\":\"Octave\"},{\"id\":\"yeoman\",\"text\":\"Yeoman\"},{\"id\":\"direnv\",\"text\":\"direnv\"},{\"id\":\"ionic3\",\"text\":\"Ionic3\"},{\"id\":\"jabref\",\"text\":\"JabRef\"},{\"id\":\"opencv\",\"text\":\"OpenCV\"},{\"id\":\"django\",\"text\":\"Django\"},{\"id\":\"kotlin\",\"text\":\"Kotlin\"},{\"id\":\"drupal\",\"text\":\"Drupal\"},{\"id\":\"jboss4\",\"text\":\"JBoss4\"},{\"id\":\"jboss6\",\"text\":\"JBoss6\"},{\"id\":\"kohana\",\"text\":\"Kohana\"},{\"id\":\"jekyll\",\"text\":\"Jekyll\"},{\"id\":\"kobalt\",\"text\":\"Kobalt\"},{\"id\":\"ph7cms\",\"text\":\"pH7CMS\"},{\"id\":\"kirby2\",\"text\":\"Kirby2\"},{\"id\":\"dotenv\",\"text\":\"dotenv\"},{\"id\":\"jgiven\",\"text\":\"JGiven\"},{\"id\":\"kdiff3\",\"text\":\"KDiff3\"},{\"id\":\"jmeter\",\"text\":\"JMeter\"},{\"id\":\"xilinx\",\"text\":\"Xilinx\"},{\"id\":\"joomla\",\"text\":\"Joomla\"},{\"id\":\"anjuta\",\"text\":\"Anjuta\"},{\"id\":\"vivado\",\"text\":\"Vivado\"},{\"id\":\"packer\",\"text\":\"Packer\"},{\"id\":\"matlab\",\"text\":\"MATLAB\"},{\"id\":\"swiftpm\",\"text\":\"SwiftPM\"},{\"id\":\"cakephp\",\"text\":\"CakePHP\"},{\"id\":\"bricxcc\",\"text\":\"BricxCC\"},{\"id\":\"ansible\",\"text\":\"Ansible\"},{\"id\":\"qooxdoo\",\"text\":\"Qooxdoo\"},{\"id\":\"angular\",\"text\":\"Angular\"},{\"id\":\"kentico\",\"text\":\"Kentico\"},{\"id\":\"dropbox\",\"text\":\"Dropbox\"},{\"id\":\"codekit\",\"text\":\"CodeKit\"},{\"id\":\"typings\",\"text\":\"Typings\"},{\"id\":\"phalcon\",\"text\":\"Phalcon\"},{\"id\":\"phoenix\",\"text\":\"Phoenix\"},{\"id\":\"android\",\"text\":\"Android\"},{\"id\":\"drupal7\",\"text\":\"Drupal7\"},{\"id\":\"labview\",\"text\":\"LabVIEW\"},{\"id\":\"drupal8\",\"text\":\"Drupal8\"},{\"id\":\"phpunit\",\"text\":\"PHPUnit\"},{\"id\":\"laravel\",\"text\":\"Laravel\"},{\"id\":\"amplify\",\"text\":\"Amplify\"},{\"id\":\"lazarus\",\"text\":\"Lazarus\"},{\"id\":\"umbraco\",\"text\":\"Umbraco\"},{\"id\":\"eclipse\",\"text\":\"Eclipse\"},{\"id\":\"pimcore\",\"text\":\"Pimcore\"},{\"id\":\"igorpro\",\"text\":\"IGORPro\"},{\"id\":\"windows\",\"text\":\"Windows\"},{\"id\":\"azurite\",\"text\":\"Azurite\"},{\"id\":\"vagrant\",\"text\":\"Vagrant\"},{\"id\":\"polymer\",\"text\":\"Polymer\"},{\"id\":\"prepros\",\"text\":\"Prepros\"},{\"id\":\"lithium\",\"text\":\"Lithium\"},{\"id\":\"dbeaver\",\"text\":\"DBeaver\"},{\"id\":\"logtalk\",\"text\":\"Logtalk\"},{\"id\":\"lsspice\",\"text\":\"LSspice\"},{\"id\":\"ltspice\",\"text\":\"LTspice\"},{\"id\":\"haskell\",\"text\":\"Haskell\"},{\"id\":\"wakanda\",\"text\":\"Wakanda\"},{\"id\":\"gitbook\",\"text\":\"GitBook\"},{\"id\":\"magento\",\"text\":\"Magento\"},{\"id\":\"flatpak\",\"text\":\"Flatpak\"},{\"id\":\"ncrunch\",\"text\":\"NCrunch\"},{\"id\":\"a-frame\",\"text\":\"A-Frame\"},{\"id\":\"clojure\",\"text\":\"Clojure\"},{\"id\":\"cordova\",\"text\":\"Cordova\"},{\"id\":\"archive\",\"text\":\"Archive\"},{\"id\":\"pycharm\",\"text\":\"PyCharm\"},{\"id\":\"appcode\",\"text\":\"AppCode\"},{\"id\":\"cs-cart\",\"text\":\"CS-Cart\"},{\"id\":\"mercury\",\"text\":\"Mercury\"},{\"id\":\"crystal\",\"text\":\"Crystal\"},{\"id\":\"flutter\",\"text\":\"Flutter\"},{\"id\":\"bitrise\",\"text\":\"Bitrise\"},{\"id\":\"fuelphp\",\"text\":\"FuelPHP\"},{\"id\":\"freecad\",\"text\":\"FreeCad\"},{\"id\":\"seamgen\",\"text\":\"SeamGen\"},{\"id\":\"fortran\",\"text\":\"Fortran\"},{\"id\":\"crbasic\",\"text\":\"CRBasic\"},{\"id\":\"stellar\",\"text\":\"Stellar\"},{\"id\":\"symfony\",\"text\":\"Symfony\"},{\"id\":\"modelsim\",\"text\":\"ModelSim\"},{\"id\":\"homebrew\",\"text\":\"Homebrew\"},{\"id\":\"sketchup\",\"text\":\"SketchUp\"},{\"id\":\"meteorjs\",\"text\":\"MeteorJS\"},{\"id\":\"shopware\",\"text\":\"Shopware\"},{\"id\":\"crossbar\",\"text\":\"Crossbar\"},{\"id\":\"database\",\"text\":\"Database\"},{\"id\":\"magento2\",\"text\":\"Magento2\"},{\"id\":\"basercms\",\"text\":\"baserCMS\"},{\"id\":\"netbeans\",\"text\":\"NetBeans\"},{\"id\":\"magento1\",\"text\":\"Magento1\"},{\"id\":\"composer\",\"text\":\"Composer\"},{\"id\":\"blackbox\",\"text\":\"Blackbox\"},{\"id\":\"compodoc\",\"text\":\"Compodoc\"},{\"id\":\"lilypond\",\"text\":\"Lilypond\"},{\"id\":\"docpress\",\"text\":\"Docpress\"},{\"id\":\"textmate\",\"text\":\"TextMate\"},{\"id\":\"rubymine\",\"text\":\"RubyMine\"},{\"id\":\"thinkphp\",\"text\":\"ThinkPHP\"},{\"id\":\"virtuoso\",\"text\":\"Virtuoso\"},{\"id\":\"e2studio\",\"text\":\"e2studio\"},{\"id\":\"easybook\",\"text\":\"easybook\"},{\"id\":\"espresso\",\"text\":\"Espresso\"},{\"id\":\"obsidian\",\"text\":\"Obsidian\"},{\"id\":\"craftcms\",\"text\":\"CraftCMS\"},{\"id\":\"reasonml\",\"text\":\"Reasonml\"},{\"id\":\"exercism\",\"text\":\"Exercism\"},{\"id\":\"fastlane\",\"text\":\"fastlane\"},{\"id\":\"opencart\",\"text\":\"OpenCart\"},{\"id\":\"bookdown\",\"text\":\"Bookdown\"},{\"id\":\"openfoam\",\"text\":\"OpenFOAM\"},{\"id\":\"firebase\",\"text\":\"Firebase\"},{\"id\":\"synology\",\"text\":\"Synology\"},{\"id\":\"floobits\",\"text\":\"floobits\"},{\"id\":\"cocos2dx\",\"text\":\"Cocos2dx\"},{\"id\":\"arcanist\",\"text\":\"Arcanist\"},{\"id\":\"goodsync\",\"text\":\"GoodSync\"},{\"id\":\"webstorm\",\"text\":\"WebStorm\"},{\"id\":\"justcode\",\"text\":\"JustCode\"},{\"id\":\"twincat3\",\"text\":\"TwinCAT3\"},{\"id\":\"particle\",\"text\":\"Particle\"},{\"id\":\"cakephp2\",\"text\":\"CakePHP2\"},{\"id\":\"valgrind\",\"text\":\"Valgrind\"},{\"id\":\"cfwheels\",\"text\":\"CFWheels\"},{\"id\":\"cakephp3\",\"text\":\"CakePHP3\"},{\"id\":\"inforcms\",\"text\":\"InforCMS\"},{\"id\":\"calabash\",\"text\":\"Calabash\"},{\"id\":\"pinegrow\",\"text\":\"PineGrow\"},{\"id\":\"pimcore5\",\"text\":\"Pimcore5\"},{\"id\":\"phpstorm\",\"text\":\"PhpStorm\"},{\"id\":\"archives\",\"text\":\"Archives\"},{\"id\":\"sugarcrm\",\"text\":\"SugarCRM\"},{\"id\":\"carthage\",\"text\":\"Carthage\"},{\"id\":\"intellij\",\"text\":\"Intellij\"},{\"id\":\"inforcrm\",\"text\":\"InforCRM\"},{\"id\":\"pimcore4\",\"text\":\"Pimcore4\"},{\"id\":\"solidity\",\"text\":\"Solidity\"},{\"id\":\"jboss-6-x\",\"text\":\"JBoss-6-x\"},{\"id\":\"clion+iml\",\"text\":\"CLion+iml\"},{\"id\":\"testinfra\",\"text\":\"Testinfra\"},{\"id\":\"jetbrains\",\"text\":\"JetBrains\"},{\"id\":\"iar_ewarm\",\"text\":\"IAR_EWARM\"},{\"id\":\"xilinxise\",\"text\":\"XilinxISE\"},{\"id\":\"smalltalk\",\"text\":\"Smalltalk\"},{\"id\":\"momentics\",\"text\":\"Momentics\"},{\"id\":\"mercurial\",\"text\":\"Mercurial\"},{\"id\":\"1c-bitrix\",\"text\":\"1C-Bitrix\"},{\"id\":\"concrete5\",\"text\":\"Concrete5\"},{\"id\":\"scrivener\",\"text\":\"Scrivener\"},{\"id\":\"oxideshop\",\"text\":\"OxidEshop\"},{\"id\":\"cypressio\",\"text\":\"CypressIO\"},{\"id\":\"assembler\",\"text\":\"Assembler\"},{\"id\":\"clion+all\",\"text\":\"CLion+all\"},{\"id\":\"greenfoot\",\"text\":\"greenfoot\"},{\"id\":\"magic-xpa\",\"text\":\"Magic-xpa\"},{\"id\":\"terraform\",\"text\":\"Terraform\"},{\"id\":\"genero4gl\",\"text\":\"Genero4GL\"},{\"id\":\"cocoapods\",\"text\":\"CocoaPods\"},{\"id\":\"ballerina\",\"text\":\"Ballerina\"},{\"id\":\"kdevelop4\",\"text\":\"KDevelop4\"},{\"id\":\"purebasic\",\"text\":\"PureBasic\"},{\"id\":\"diskimage\",\"text\":\"DiskImage\"},{\"id\":\"fontforge\",\"text\":\"FontForge\"},{\"id\":\"appengine\",\"text\":\"AppEngine\"},{\"id\":\"snapcraft\",\"text\":\"Snapcraft\"},{\"id\":\"notepadpp\",\"text\":\"NotepadPP\"},{\"id\":\"qtcreator\",\"text\":\"QtCreator\"},{\"id\":\"wordpress\",\"text\":\"WordPress\"},{\"id\":\"liberosoc\",\"text\":\"LiberoSOC\"},{\"id\":\"sonarqube\",\"text\":\"SonarQube\"},{\"id\":\"leiningen\",\"text\":\"Leiningen\"},{\"id\":\"slickedit\",\"text\":\"SlickEdit\"},{\"id\":\"autotools\",\"text\":\"Autotools\"},{\"id\":\"episerver\",\"text\":\"EPiServer\"},{\"id\":\"fusetools\",\"text\":\"FuseTools\"},{\"id\":\"jdeveloper\",\"text\":\"JDeveloper\"},{\"id\":\"executable\",\"text\":\"Executable\"},{\"id\":\"appbuilder\",\"text\":\"AppBuilder\"},{\"id\":\"virtualenv\",\"text\":\"VirtualEnv\"},{\"id\":\"sourcepawn\",\"text\":\"SourcePawn\"},{\"id\":\"lemonstand\",\"text\":\"LemonStand\"},{\"id\":\"labviewnxg\",\"text\":\"LabVIEWNXG\"},{\"id\":\"codeblocks\",\"text\":\"CodeBlocks\"},{\"id\":\"webmethods\",\"text\":\"WebMethods\"},{\"id\":\"dotnetcore\",\"text\":\"DotnetCore\"},{\"id\":\"dotfilessh\",\"text\":\"DotfilesSh\"},{\"id\":\"komodoedit\",\"text\":\"KomodoEdit\"},{\"id\":\"localstack\",\"text\":\"LocalStack\"},{\"id\":\"commonlisp\",\"text\":\"CommonLisp\"},{\"id\":\"salesforce\",\"text\":\"Salesforce\"},{\"id\":\"keystonejs\",\"text\":\"KeystoneJS\"},{\"id\":\"freepascal\",\"text\":\"FreePascal\"},{\"id\":\"sam+config\",\"text\":\"SAM+config\"},{\"id\":\"standardml\",\"text\":\"StandardML\"},{\"id\":\"bittorrent\",\"text\":\"BitTorrent\"},{\"id\":\"purescript\",\"text\":\"PureScript\"},{\"id\":\"compressed\",\"text\":\"Compressed\"},{\"id\":\"darteditor\",\"text\":\"DartEditor\"},{\"id\":\"chocolatey\",\"text\":\"Chocolatey\"},{\"id\":\"werckercli\",\"text\":\"WerckerCLI\"},{\"id\":\"processing\",\"text\":\"Processing\"},{\"id\":\"mavensmate\",\"text\":\"MavensMate\"},{\"id\":\"prestashop\",\"text\":\"Prestashop\"},{\"id\":\"serverless\",\"text\":\"Serverless\"},{\"id\":\"aspnetcore\",\"text\":\"ASPNETCore\"},{\"id\":\"powershell\",\"text\":\"PowerShell\"},{\"id\":\"platformio\",\"text\":\"PlatformIO\"},{\"id\":\"octobercms\",\"text\":\"OctoberCms\"},{\"id\":\"terragrunt\",\"text\":\"Terragrunt\"},{\"id\":\"progressabl\",\"text\":\"ProgressABL\"},{\"id\":\"senchatouch\",\"text\":\"SenchaTouch\"},{\"id\":\"appcode+all\",\"text\":\"AppCode+all\"},{\"id\":\"appcode+iml\",\"text\":\"AppCode+iml\"},{\"id\":\"atmelstudio\",\"text\":\"AtmelStudio\"},{\"id\":\"wintersmith\",\"text\":\"Wintersmith\"},{\"id\":\"codeigniter\",\"text\":\"CodeIgniter\"},{\"id\":\"codesniffer\",\"text\":\"CodeSniffer\"},{\"id\":\"reactnative\",\"text\":\"ReactNative\"},{\"id\":\"compression\",\"text\":\"Compression\"},{\"id\":\"spreadsheet\",\"text\":\"Spreadsheet\"},{\"id\":\"pycharm+iml\",\"text\":\"PyCharm+iml\"},{\"id\":\"pycharm+all\",\"text\":\"PyCharm+all\"},{\"id\":\"crashlytics\",\"text\":\"Crashlytics\"},{\"id\":\"dotsettings\",\"text\":\"DotSettings\"},{\"id\":\"psoccreator\",\"text\":\"PSoCCreator\"},{\"id\":\"monodevelop\",\"text\":\"MonoDevelop\"},{\"id\":\"storybookjs\",\"text\":\"StorybookJs\"},{\"id\":\"dreamweaver\",\"text\":\"Dreamweaver\"},{\"id\":\"flexbuilder\",\"text\":\"FlexBuilder\"},{\"id\":\"sublimetext\",\"text\":\"SublimeText\"},{\"id\":\"forcedotcom\",\"text\":\"ForceDotCom\"},{\"id\":\"forgegradle\",\"text\":\"ForgeGradle\"},{\"id\":\"turbogears2\",\"text\":\"TurboGears2\"},{\"id\":\"tortoisegit\",\"text\":\"TortoiseGit\"},{\"id\":\"zukencr8000\",\"text\":\"ZukenCR8000\"},{\"id\":\"oracleforms\",\"text\":\"OracleForms\"},{\"id\":\"symphonycms\",\"text\":\"SymphonyCMS\"},{\"id\":\"libreoffice\",\"text\":\"LibreOffice\"},{\"id\":\"synopsysvcs\",\"text\":\"SynopsysVCS\"},{\"id\":\"theos-tweak\",\"text\":\"THEOS-Tweak\"},{\"id\":\"textpattern\",\"text\":\"Textpattern\"},{\"id\":\"objective-c\",\"text\":\"Objective-C\"},{\"id\":\"silverstripe\",\"text\":\"Silverstripe\"},{\"id\":\"nativescript\",\"text\":\"NativeScript\"},{\"id\":\"testcomplete\",\"text\":\"TestComplete\"},{\"id\":\"actionscript\",\"text\":\"Actionscript\"},{\"id\":\"unrealengine\",\"text\":\"UnrealEngine\"},{\"id\":\"coffeescript\",\"text\":\"CoffeeScript\"},{\"id\":\"lighthouseci\",\"text\":\"LighthouseCI\"},{\"id\":\"ansibletower\",\"text\":\"AnsibleTower\"},{\"id\":\"datarecovery\",\"text\":\"DataRecovery\"},{\"id\":\"apachehadoop\",\"text\":\"ApacheHadoop\"},{\"id\":\"salesforcedx\",\"text\":\"SalesforceDX\"},{\"id\":\"rubymine+iml\",\"text\":\"RubyMine+iml\"},{\"id\":\"aptanastudio\",\"text\":\"AptanaStudio\"},{\"id\":\"xilinxvivado\",\"text\":\"XilinxVivado\"},{\"id\":\"cocoscreator\",\"text\":\"CocosCreator\"},{\"id\":\"visualstudio\",\"text\":\"VisualStudio\"},{\"id\":\"eiffelstudio\",\"text\":\"EiffelStudio\"},{\"id\":\"rubymine+all\",\"text\":\"RubyMine+all\"},{\"id\":\"certificates\",\"text\":\"certificates\"},{\"id\":\"intellij+iml\",\"text\":\"Intellij+iml\"},{\"id\":\"intellij+all\",\"text\":\"Intellij+all\"},{\"id\":\"webstorm+all\",\"text\":\"WebStorm+all\"},{\"id\":\"chefcookbook\",\"text\":\"ChefCookbook\"},{\"id\":\"webstorm+iml\",\"text\":\"WebStorm+iml\"},{\"id\":\"flashbuilder\",\"text\":\"FlashBuilder\"},{\"id\":\"phpstorm+all\",\"text\":\"PhpStorm+all\"},{\"id\":\"phpstorm+iml\",\"text\":\"PhpStorm+iml\"},{\"id\":\"playframework\",\"text\":\"PlayFramework\"},{\"id\":\"homeassistant\",\"text\":\"HomeAssistant\"},{\"id\":\"zendframework\",\"text\":\"ZendFramework\"},{\"id\":\"circuitpython\",\"text\":\"CircuitPython\"},{\"id\":\"jetbrains+all\",\"text\":\"JetBrains+all\"},{\"id\":\"premake-gmake\",\"text\":\"premake-gmake\"},{\"id\":\"jetbrains+iml\",\"text\":\"JetBrains+iml\"},{\"id\":\"xamarinstudio\",\"text\":\"XamarinStudio\"},{\"id\":\"pulumi+stacks\",\"text\":\"Pulumi+stacks\"},{\"id\":\"apachecordova\",\"text\":\"ApacheCordova\"},{\"id\":\"androidstudio\",\"text\":\"AndroidStudio\"},{\"id\":\"pythonvanilla\",\"text\":\"PythonVanilla\"},{\"id\":\"xcodeinjection\",\"text\":\"XcodeInjection\"},{\"id\":\"librarian-chef\",\"text\":\"librarian-chef\"},{\"id\":\"robotframework\",\"text\":\"robotframework\"},{\"id\":\"openframeworks\",\"text\":\"OpenFrameworks\"},{\"id\":\"konyvisualizer\",\"text\":\"KonyVisualizer\"},{\"id\":\"phpcodesniffer\",\"text\":\"PHPCodeSniffer\"},{\"id\":\"typo3-composer\",\"text\":\"TYPO3-composer\"},{\"id\":\"jboss-4-2-3-ga\",\"text\":\"JBoss-4-2-3-GA\"},{\"id\":\"azurefunctions\",\"text\":\"AzureFunctions\"},{\"id\":\"rhodesrhomobile\",\"text\":\"RhodesRhomobile\"},{\"id\":\"microsoftoffice\",\"text\":\"MicrosoftOffice\"},{\"id\":\"alteraquartusii\",\"text\":\"AlteraQuartusII\"},{\"id\":\"oxygenxmleditor\",\"text\":\"oXygenXMLEditor\"},{\"id\":\"soliditytruffle\",\"text\":\"SolidityTruffle\"},{\"id\":\"jupyternotebooks\",\"text\":\"JupyterNotebooks\"},{\"id\":\"automationstudio\",\"text\":\"AutomationStudio\"},{\"id\":\"puppet-librarian\",\"text\":\"puppet-librarian\"},{\"id\":\"autotools+strict\",\"text\":\"Autotools+strict\"},{\"id\":\"visualstudiocode\",\"text\":\"VisualStudioCode\"},{\"id\":\"tarmainstallmate\",\"text\":\"TarmaInstallMate\"},{\"id\":\"elasticbeanstalk\",\"text\":\"ElasticBeanstalk\"},{\"id\":\"expressionengine\",\"text\":\"ExpressionEngine\"},{\"id\":\"compressedarchive\",\"text\":\"CompressedArchive\"},{\"id\":\"archlinuxpackages\",\"text\":\"ArchLinuxPackages\"},{\"id\":\"advancedinstaller\",\"text\":\"AdvancedInstaller\"},{\"id\":\"codecomposerstudio\",\"text\":\"CodeComposerStudio\"},{\"id\":\"swiftpackagemanager\",\"text\":\"SwiftPackageManager\"},{\"id\":\"hyperledgercomposer\",\"text\":\"HyperledgerComposer\"},{\"id\":\"adventuregamestudio\",\"text\":\"AdventureGameStudio\"},{\"id\":\"iarembeddedworkbench\",\"text\":\"IAREmbeddedWorkBench\"},{\"id\":\"appceleratortitanium\",\"text\":\"AppceleratorTitanium\"},{\"id\":\"metaprogrammingsystem\",\"text\":\"MetaProgrammingSystem\"},{\"id\":\"nodechakratimetraveldebug\",\"text\":\"NodeChakraTimeTravelDebug\"},{\"id\":\"openframeworks+visualstudio\",\"text\":\"OpenFrameworks+VisualStudio\"}]"
	for _, result := range gjson.Parse(json).Array() {
		elem := element{id: result.Get("id").String(), text: result.Get("text").String()}
		elements = append(elements, elem)
	}
}

func run() {
	args := wf.Args()

	if args == nil || len(args) == 0 {
		wf.SendFeedback()
		return
	}

	query := args[0]

	if query == "search" {
		response, err := http.Get("https://www.toptal.com/developers/gitignore/api/" + args[1])
		if err != nil {
			wf.Fatal("Cannot get data from api...")
			return
		}
		defer func(Body io.ReadCloser) {
			_ = Body.Close()
		}(response.Body)

		body, _ := ioutil.ReadAll(response.Body)

		item := wf.NewItem("📄 your .gitignore is in clipboard!")
		item.Arg(string(body))
		item.Valid(true)

		wf.SendFeedback()
		return
	}

	stored := wf.Config.GetString("stored", "")
	if len(stored) > 0 {
		item := wf.NewItem("📍 selected: " + stored)
		item.Cmd().Subtitle("you can generate .gitignore for " + stored).Arg(stored)
	} else {
		item := wf.NewItem("🔍 search & choose")
		item.Subtitle("  you can choose multiple item.")

	}

	splits := strings.Split(stored, ",")

	splitMap := make(map[string]string)
	for i := 0; i < len(splits); i += 1 {
		splitMap[splits[i]] = splits[i]
	}

	for _, elem := range elements {
		_, ok := splitMap[elem.id]

		if !ok {
			item := wf.NewItem(elem.text)
			item.Arg(elem.id)
			item.Var("value", elem.id)
			item.Valid(true)
			item.Cmd().Subtitle("you can generate .gitignore for " + stored).Arg(elem.id)
		}
	}

	if len(query) > 0 {
		wf.Filter(query)
	}

	wf.SendFeedback()
}

func main() {
	wf.Run(run)
}
